{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  inputDelayEl: document.querySelector('input[name=\"delay\"]'),\n  inputStepEl: document.querySelector('input[name=\"step\"]'),\n  inputAmountEl: document.querySelector('input[name=\"amount\"]'),\n  submitBTn: document.querySelector('button[type=\"submit\"]'),\n};\n\nrefs.form.addEventListener('submit', handleFormSubmit);\nlet promiseCounter = 0;\n\nfunction handleFormSubmit(e) {\n  e.preventDefault();\n\n  const firstDelay = Number(refs.inputDelayEl.value);\n  const step = Number(refs.inputStepEl.value);\n  const amount = Number(refs.inputAmountEl.value);\n\n  let delay = firstDelay;\n\n  const intervalId = setInterval(() => {\n    if (promiseCounter === amount) {\n      clearInterval(intervalId);\n      promiseCounter = 0;\n      return;\n    }\n\n    createPromise(promiseCounter + 1, delay)\n      .then(resp => console.log(resp))\n      .catch(err => console.log(err))\n      .finally((delay += step));\n  }, step);\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    promiseCounter++;\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        iziToast.success({\n          message: `Fulfilled promise ${position} in ${delay}ms`,\n          position: 'topRight',\n        });\n\n        return resolve({ position, delay });\n      } else {\n        iziToast.error({\n          message: `Rejected promise ${position} in ${delay}ms`,\n          position: 'topRight',\n        });\n\n        return reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n"],"names":["refs","handleFormSubmit","promiseCounter","e","firstDelay","step","amount","delay","intervalId","createPromise","resp","err","position","resolve","reject","shouldResolve","iziToast"],"mappings":"wIAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,aAAc,SAAS,cAAc,qBAAqB,EAC1D,YAAa,SAAS,cAAc,oBAAoB,EACxD,cAAe,SAAS,cAAc,sBAAsB,EAC5D,UAAW,SAAS,cAAc,uBAAuB,CAC3D,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAgB,EACrD,IAAIC,EAAiB,EAErB,SAASD,EAAiBE,EAAG,CAC3BA,EAAE,eAAc,EAEhB,MAAMC,EAAa,OAAOJ,EAAK,aAAa,KAAK,EAC3CK,EAAO,OAAOL,EAAK,YAAY,KAAK,EACpCM,EAAS,OAAON,EAAK,cAAc,KAAK,EAE9C,IAAIO,EAAQH,EAEZ,MAAMI,EAAa,YAAY,IAAM,CACnC,GAAIN,IAAmBI,EAAQ,CAC7B,cAAcE,CAAU,EACxBN,EAAiB,EACjB,MACD,CAEDO,EAAcP,EAAiB,EAAGK,CAAK,EACpC,KAAKG,GAAQ,QAAQ,IAAIA,CAAI,CAAC,EAC9B,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAC7B,QAASJ,GAASF,EACtB,EAAEA,CAAI,CACT,CAEA,SAASI,EAAcG,EAAUL,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACM,EAASC,IAAW,CACtCZ,IACA,MAAMa,EAAgB,KAAK,OAAM,EAAK,GACtC,WAAW,IACLA,GACFC,EAAS,QAAQ,CACf,QAAS,qBAAqBJ,QAAeL,MAC7C,SAAU,UACpB,CAAS,EAEMM,EAAQ,CAAE,SAAAD,EAAU,MAAAL,CAAO,CAAA,IAElCS,EAAS,MAAM,CACb,QAAS,oBAAoBJ,QAAeL,MAC5C,SAAU,UACpB,CAAS,EAEMO,EAAO,CAAE,SAAAF,EAAU,MAAAL,CAAO,CAAA,GAElCA,CAAK,CACZ,CAAG,CACH"}